# 固定窗口限流
指定用户(user_id)的某个行为(action_key)在特定的时间内(period)只允许发生最多的次数(max_count)


# 整体思路
- 用一个zset结构记录用户的行为历史，每一个行为都会作为zset中的一个key保存下来。同一个用户的同一种行为用一个zset记录。
- 每一个行为到来时，都维护一次时间窗口。将时间窗口外的记录全部清理掉，只保留窗口内的记录。
- zset集合中只有score值非常重要， value值没有特别的意义，只需要保证它是唯一的就可以了。
- 因为这几个连续的Redis操作都是针对同一个key的，使用pipeline可以显著提升Redis存取效率。
- 为节省内存，只需要保留时间窗口内的行为记录，同时如果用户是冷用户，滑动时间窗口内的行为是空记录，那么这个zset就可以从内存中移除，不再占用空间。

# 缺点
- 因为它要记录时间窗口内所有的行为记录，如果这个量很大，比如“限定60s内操作不得超过100万次”之类，它是不适合做这样的限流的，因为会消耗大量的存储空间。